import"./index-CrqZv4ZA.js";import{d as T,W as K,u as G,r,j as y,g as s,c as u,l as f,f as _,i as C,J as H,X as $,o as m,_ as E,m as B,b as Q,h as W,e as g,t as X,F as z,k as Y,v as Z,Y as ee,L as te,E as ne,U as se,G as ae,Z as R}from"./index-DCiH_xld.js";import{s as L}from"./qwenAPI-Brai_avf.js";import{m as N}from"./marked.esm-DK8KC6kv.js";const oe={class:"data-input"},le={class:"input-section"},re={class:"select-section"},ue={class:"input-section",id:"input-value"},ie=T({__name:"userInput",setup(M){const b=K(G()),h=[],k=r();b.value.projects.forEach(n=>h.push({label:"项目:"+n.projectName,value:"项目简介："+n.briefIntroduction+`
项目描述：`+n.description})),b.value.workExperience.forEach(n=>h.push({label:"工作:"+n.company,value:"公司名称："+n.company+`
职位：`+n.position+`
工作内容：`+n.description}));const c=$("jd"),a=$("resumeProject"),l=n=>{a&&(a.value=n)};return(n,t)=>{const x=_("a-textarea"),S=_("a-select");return m(),y("div",oe,[s("div",le,[t[3]||(t[3]=s("div",{class:"input-header"},[f("岗位 JD"),s("span",{style:{"font-size":"12px"}},"（岗位要求）")],-1)),u(x,{value:C(c),"onUpdate:value":t[0]||(t[0]=o=>H(c)?c.value=o:null),placeholder:"请输入岗位 JD...",class:"custom-textarea"},null,8,["value"])]),s("div",re,[t[4]||(t[4]=s("div",{class:"input-header"},[f("选择经历"),s("span",{style:{"font-size":"12px"}},"（选择一段经历拷打）")],-1)),u(S,{value:k.value,"onUpdate:value":t[1]||(t[1]=o=>k.value=o),placeholder:"请选择经历",options:h,onChange:l},null,8,["value"])]),s("div",ue,[t[5]||(t[5]=s("div",{class:"input-header"},[f("经历"),s("span",{style:{"font-size":"12px"}},"（建议一次深挖一段经历即可）")],-1)),u(x,{value:C(a),"onUpdate:value":t[2]||(t[2]=o=>H(a)?a.value=o:null),placeholder:"请输入项目/实习/工作经历...",class:"custom-textarea"},null,8,["value"])])])}}}),ce=E(ie,[["__scopeId","data-v-d988693f"]]),de={class:"chat-container"},ve={key:1,style:{"text-align":"center"}},pe={class:"message-content"},me=["innerHTML"],fe={style:{"text-align":"center"}},_e={key:2,class:"interview-result"},he=["innerHTML"],ge={key:3,style:{"text-align":"center"}},ye={key:0,style:{"text-align":"center"}},xe={style:{color:"red"}},be={class:"chat-input",id:"ai-chat-content"},ke={class:"send-button"},we=T({__name:"AIChat",setup(M){const b=$("jd",r("")),h=$("resumeProject",r("")),k=$("beginTour"),c=r(),a=r(!1),l=r(),n=r({role:"user",content:""}),t=r([]),x=i=>{l.value=i,l.value?(t.value.push({role:"system",content:"你是一个AI助手，请根据用户输入的岗位jd以及工作/项目经历进行深度优化，你的身份是一个简历优化师，你可以通过查看我的岗位jd和我的经历不断询问我问题，你是主导者，要主导本次对话，每轮对话都要根据我的简历主动提出问题等我回复你，然后你不断修改简历，然后帮我优化我的简历，如果简历有优化，请使用```resume   ```进行包裹！一行为一条内容"}),n.value.role="user",n.value.content=`您好，请读取我的这段项目/工作经历以及岗位jd！${"```resume"+h.value+" ```"}  ${"```岗位jd"+b.value+" ```"} `,j()):(t.value.push({role:"system",content:"你是一个AI面试官，请根据用户输入的岗位jd以及工作/项目经历进行深度的项目拷打，你可以通过查看我的岗位jd和我的经历不断询问我问题，可以适当沿着项目延申询问或者深挖项目，可以追问我。你是主导者，要主导本次对话，不断向我进行面试提问，尽量一次只提问一个问题，然后用户回复后可以接着追问或者另外从另一个方面进行提问。"}),n.value.role="user",n.value.content=`面试官，您好，请读取我的这段项目/工作经历以及岗位jd！${"```resume"+h.value+" ```"}  ${"```岗位jd"+b.value+" ```"} `,j())},S=i=>(i=i.replace(/```resume[\s\S]*?```/g,""),i=i.replace(/```岗位jd[\s\S]*?```/g,""),N(i)),o=async()=>{await ae(),c.value&&(c.value.scrollTop=c.value.scrollHeight)},d=r(!1),j=async()=>{if(!n.value.content.trim()||a.value||l.value===void 0||l.value===null)return;n.value.content=n.value.content.trim();let i=JSON.parse(JSON.stringify(n.value));t.value.push(i),n.value.content="",await o(),a.value=!0;try{await L(t.value,(e,w)=>{if(t.value[t.value.length-1].role==="user"?t.value.push({role:"assistant",content:e}):t.value[t.value.length-1].content=e,w){let v=t.value[t.value.length-1].content;const P=v.match(/```resume\s*([\s\S]*?)```/)||v.match(/```([\s\S]*?)```/);P&&(v=P[1].trim(),h.value=v,t.value[t.value.length-1].content=t.value[t.value.length-1].content.replace(/```resume[\s\S]*?```/g,"`已自动填充进右侧输入框`"))}o()})}catch(e){console.error("AI 处理失败:",e),t.value.push({role:"assistant",content:"AI 处理失败，请稍后再试。"})}finally{a.value=!1}},I=r(""),A=r(0),D=async()=>{d.value=!0;let i=ne(t.value.map(e=>({...e})));i.push({role:"user",content:"好的，结束面试了，满分100分的话给我一个客观的分数用```分数```包裹，例如```40```，另外你帮我总结一下我的面试情况，告诉我将来哪些地方可以加强，以及我在面试中的优点和不足的地方。你返回的内容不要出现markdown语法，直接换行序号分点就行。"}),a.value=!0;try{await L(i,e=>{const w=e.match(/```\s*([\s\S]*?)```/);w&&(A.value=parseInt(w[1].trim()),e=e.replace(/```[\s\S]*?```/g,"")),I.value=e,o()})}catch(e){console.error("AI 处理失败:",e),t.value.push({role:"assistant",content:"AI 处理失败，请稍后再试。"})}finally{a.value=!1}},F=()=>{t.value=[],d.value=!1,I.value="",A.value=0,l.value=void 0,n.value.content=""};return(i,e)=>{const w=_("a-alert"),v=_("a-button"),P=_("a-space"),U=_("a-tag"),J=_("a-card"),O=_("a-badge-ribbon"),V=_("a-textarea");return m(),y("div",de,[s("div",{class:"chat-history",ref_key:"chatHistoryRef",ref:c},[u(w,{"show-icon":"",message:"AI深度交流-根据您所填的项目、工作等通过问答方式对您的经历进行扩展优化或者模拟面试问答！",type:"info"}),u(w,{"show-icon":"",message:"tips：使用前请优先填写右侧的岗位jd以及工作/项目经历！",type:"warning ",closable:""}),l.value===void 0||l.value===null?(m(),Q(P,{key:0,wrap:"",class:"button-group",id:"ai-choose-content"},{default:g(()=>[u(v,{type:"primary",onClick:e[0]||(e[0]=p=>x(!0))},{default:g(()=>e[6]||(e[6]=[f("经历深挖")])),_:1}),u(v,{type:"primary",onClick:e[1]||(e[1]=p=>x(!1))},{default:g(()=>e[7]||(e[7]=[f(" 模拟面试")])),_:1})]),_:1})):(m(),y("div",ve,[u(U,{color:"green"},{default:g(()=>[f(X(l.value?"经历深挖":"模拟面试"),1)]),_:1})])),(m(!0),y(z,null,Y(t.value,(p,q)=>(m(),y("div",{key:q,class:se(["message-item",p.role])},[s("div",pe,[s("div",{class:"message-text",innerHTML:S(p.content)},null,8,me)])],2))),128)),W(s("div",fe,[u(v,{type:"primary",onClick:e[2]||(e[2]=p=>D()),disabled:a.value},{default:g(()=>e[8]||(e[8]=[f("结束面试")])),_:1},8,["disabled"])],512),[[Z,!l.value&&t.value.length>5&&!d.value]]),d.value?(m(),y("div",_e,[u(O,{text:"AI评分："+A.value+"分",color:A.value>=60?"green":"red"},{default:g(()=>[u(J,{title:"AI评估面试结果",size:"small",class:"result-card"},{default:g(()=>[s("div",{class:"message-text result-content",innerHTML:C(N)(I.value)},null,8,he)]),_:1})]),_:1},8,["text","color"])])):B("",!0),d.value?(m(),y("div",ge,[u(v,{type:"primary",onClick:e[3]||(e[3]=p=>F()),disabled:a.value},{default:g(()=>e[9]||(e[9]=[f("重新开始")])),_:1},8,["disabled"])])):B("",!0)],512),l.value===void 0||l.value===null?(m(),y("div",ye,[s("p",xe,[e[10]||(e[10]=f('请先在上方按钮中选择"经历深挖"或者"模拟面试"！')),s("span",{onClick:e[4]||(e[4]=(...p)=>C(k)&&C(k)(...p)),style:{"border-radius":"5px","background-color":"#1677FF","font-size":"12px",color:"white",padding:"3px",cursor:"pointer"}},"使用说明")])])):B("",!0),s("div",be,[u(V,{value:n.value.content,"onUpdate:value":e[5]||(e[5]=p=>n.value.content=p),rows:3,placeholder:"输入消息，Enter 发送...",disabled:a.value||d.value,onKeydown:ee(te(j,["prevent"]),["enter"])},null,8,["value","disabled","onKeydown"]),s("div",ke,[u(v,{type:"primary",loading:a.value,onClick:j,disabled:!n.value.content.trim()||l.value===void 0||l.value===null||d.value},{default:g(()=>e[11]||(e[11]=[f(" 发 送 ")])),_:1},8,["loading","disabled"])])])])}}}),je=E(we,[["__scopeId","data-v-648c9e70"]]),Ie={class:"main-box"},Ce=T({name:"aiDeep",__name:"index",setup(M){const b=r(""),h=r("");R("resumeProject",b),R("jd",h);const k=r(null),c=r(null),a=r(null),l=r(null),n=r(!1),t=[{title:"输入信息",description:"第一步：在侧边输入需要深度优化或者面试的内容。",target:()=>c.value,placement:"left",nextButtonProps:{children:()=>"下一步"}},{title:"选择方式",description:"第二步：选择“经历深挖”或“模拟面试”",target:()=>{var o;return(o=a.value)==null?void 0:o.$el.querySelector("#ai-choose-content")},placement:"bottom",prevButtonProps:{children:()=>"上一步"},nextButtonProps:{children:()=>"下一步"}},{title:"开始对话",description:"第三步：开始和AI对话",target:()=>{var o;return(o=a.value)==null?void 0:o.$el.querySelector("#ai-chat-content")},placement:"top",prevButtonProps:{children:()=>"上一步"},nextButtonProps:{children:()=>"下一步"}},{title:"经历修改",description:"最后：“经历深挖”模式下，AI会自动修改您的经历帮您优化！您只需要给建议即可",target:()=>{var o;return(o=l.value)==null?void 0:o.$el.querySelector("#input-value")},placement:"left",prevButtonProps:{children:()=>"上一步"},nextButtonProps:{children:()=>"关闭"}}],x=()=>{n.value=!1};return R("beginTour",()=>{n.value=!0}),(o,d)=>{const j=_("a-tour");return m(),y(z,null,[s("div",Ie,[s("div",{class:"left",ref_key:"left",ref:k},[u(je,{ref_key:"aiChatRef",ref:a},null,512)],512),s("div",{class:"right",ref_key:"right",ref:c},[u(ce,{ref_key:"inputRef",ref:l},null,512)],512)]),u(j,{open:n.value,"onUpdate:open":d[0]||(d[0]=I=>n.value=I),arrow:"true",steps:t,mask:!0,"prev-button-props":{children:"上一步"},"finish-button-props":{children:"完成"},onFinish:x,onClose:x},null,8,["open"])],64)}}}),Be=E(Ce,[["__scopeId","data-v-9724e6f6"]]);export{Be as default};
